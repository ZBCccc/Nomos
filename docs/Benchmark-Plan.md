# 基准测试计划

## 1. 测试目标

验证 Nomos 和 MC-ODXT 方案的性能和正确性

---

## 2. Nomos 基准测试

### 2.1 功能测试

| 测试用例 | 描述 | 预期结果 |
|---------|------|----------|
| 单关键词搜索 | 添加文档后搜索单个关键词 | 返回包含该关键词的文档 |
| 合取搜索 | 搜索多个关键词（AND） | 返回包含所有关键词的文档 |
| 前向私有 | 添加新文档后搜索历史关键词 | 新文档不会被泄露 |
| 后向私有 | 删除文档后搜索 | 已删除文档不可见 |

### 2.2 性能测试

| 指标 | 描述 |
|------|------|
| **Setup 时间** | 初始化时间（密钥生成、TSet/XSet 初始化）|
| **Update 时间** | 添加/删除单个文档的时间 |
| **Search 时间** | 单个搜索请求的响应时间 |
| **TSet 大小** | TSet 存储的条目数 |
| **XSet 大小** | XSet（布隆过滤器）大小 |

### 2.3 规模测试

| 参数 | 范围 |
|------|------|
| 文档数量 | 100, 1K, 10K, 100K |
| 关键词数量 | 10, 100, 1K, 10K |
| 关键词/文档 | 1-20 |

---

## 3. MC-ODXT 基准测试

### 3.1 功能测试

| 测试用例 | 描述 | 预期结果 |
|---------|------|----------|
| 多用户搜索 | 多个用户搜索同一数据 | 返回授权的文档 |
| 用户隔离 | 未授权用户搜索 | 拒绝访问 |
| 授权管理 | Owner 授权/撤销用户 | 权限正确生效 |
| 合取搜索 | 多关键词搜索 | 正确过滤 |

### 3.2 性能测试

| 指标 | 描述 |
|------|------|
| **密钥生成时间** | Owner/User 密钥生成 |
| **授权时间** | 授予/撤销权限的时间 |
| **令牌生成时间** | 搜索令牌生成时间 |
| **搜索时间** | 多用户场景下的搜索时间 |

### 3.3 规模测试

| 参数 | 范围 |
|------|------|
| 用户数量 | 1, 5, 10, 50, 100 |
| 文档数量 | 100, 1K, 10K |
| 授权用户比例 | 10%, 50%, 100% |

---

## 4. 测试方法

### 4.1 运行环境

```bash
CPU: Apple Silicon (M系列)
OS: macOS
编译器: clang++ -O3
```

### 4.2 测试命令

```bash
# Nomos 基准测试
./Nomos --benchmark --doc-count 1000 --keyword-count 100

# MC-ODXT 基准测试
./Nomos mc-odxt --benchmark --user-count 10 --doc-count 1000
```

### 4.3 输出格式

- CSV 格式：便于数据分析
- JSON 格式：便于程序解析

---

## 5. 测试计划

### Phase 1: Nomos 功能测试
- [ ] 单关键词搜索
- [ ] 合取搜索
- [ ] 前向私有验证
- [ ] 后向私有验证

### Phase 2: Nomos 性能测试
- [ ] 文档数量 vs 搜索时间
- [ ] 关键词数量 vs 搜索时间
- [ ] 存储开销测量

### Phase 3: MC-ODXT 功能测试
- [ ] 多用户搜索
- [ ] 用户隔离
- [ ] 授权管理
- [ ] 合取搜索

### Phase 4: MC-ODXT 性能测试
- [ ] 用户数量 vs 性能
- [ ] 授权开销
- [ ] 令牌生成时间

---

*测试计划创建：2026-03-01*
